<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Opskrifter i airfryer ‚Äì alle opskrifter samlet √©t sted</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="F√• overblikket over alle opskrifter i airfryer ‚Äì kylling, fisk, kartofler, gr√∏ntsager, tilbeh√∏r, snacks, julemad og klassiske favoritter.">

  <!-- üöÄ Styling ‚Äì SIKKER sti -->
  <link rel="stylesheet" href="../assets/styles.css" />
</head>

<body>

  <div data-include="icons"></div>
  <div data-include="header"></div>

  <main>
    <article class="page-recipes">

      <!-- HERO -->
      <section class="hero hero-inner">
        <div class="hero-inner-content">
          <p class="hero-kicker">alle opskrifter</p>
          <h1 class="hero-title">Opskrifter i airfryer</h1>
          <p class="hero-lead">
            Her finder du alle opskrifter samlet √©t sted. Brug s√∏gning, kategorier og filtrering for at finde pr√¶cis det du leder efter.
          </p>
        </div>
      </section>

      <!-- FILTER -->
      <section class="filter-bar">
        <div class="filter-bar-inner">
          <span class="filter-label">Filtr√©r:</span>
          <div class="filter-buttons">
            <button class="filter-btn is-active" data-filter="Alle">Alle</button>
            <button class="filter-btn" data-filter="sproede-kartofler">Spr√∏de kartofler</button>
            <button class="filter-btn" data-filter="kyllingefavoritter">Kylling</button>
            <button class="filter-btn" data-filter="nem-aftensmad">Aftensmad</button>
            <button class="filter-btn" data-filter="snacks-tilbehor">Snacks & tilbeh√∏r</button>
            <button class="filter-btn" data-filter="morgenmad">Morgenmad</button>
            <button class="filter-btn" data-filter="jul">Jul</button>
            <button class="filter-btn" data-filter="sund-airfryer">Sundt</button>
          </div>
        </div>
      </section>

      <!-- GRID -->
      <section class="section-category" style="margin-top:2.5rem; margin-bottom:3rem;">
        <div class="category-header">
          <div>
            <h2 class="section-title">Alle opskrifter</h2>
            <p class="section-desc" id="recipes-count">
              Indl√¶ser opskrifter ‚Ä¶
            </p>
          </div>
        </div>

        <div class="category-grid" id="recipes-grid">
          <!-- Dynamisk indhold -->
        </div>

        <div id="recipes-empty-state" style="display:none; max-width:700px; margin:2rem auto; text-align:center; color:#666;">
          <p>Ingen opskrifter matcher filtrene.</p>
        </div>
      </section>

    </article>
  </main>

  <div data-include="footer"></div>
  <div data-include="analytics"></div>

  <!-- INCLUDE -->
  <script src="../assets/include.js" defer></script>

  <!-- üî• LOAD recipes.json ‚Üí alt dynamisk -->
  <script>
    let ALL_RECIPES = [];

    async function loadRecipes() {
      const response = await fetch("../assets/recipes.json");
      const data = await response.json();

      ALL_RECIPES = data.recipes.map(r => ({
        slug: r.slug,
        title: r.title,
        url: `./${r.slug}.html`,
        image: `../assets/images/recipes/${r.slug}-768x768.jpg`,
        categories: r.categories || []
      }));
    }
  </script>

  <!-- üî• RENDER -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {

      await loadRecipes(); // hent JSON

      const grid = document.querySelector("#recipes-grid");
      const count = document.querySelector("#recipes-count");
      const empty = document.querySelector("#recipes-empty-state");
      const filterButtons = document.querySelectorAll(".filter-btn");

      let activeFilter = "Alle";

      function render(list) {
        grid.innerHTML = "";

        if (!list.length) {
          empty.style.display = "block";
          count.textContent = "Ingen opskrifter fundet";
          return;
        }

        empty.style.display = "none";

        list.forEach(r => {
          const el = document.createElement("article");
          el.className = "category-card";
          el.innerHTML = `
            <a href="${r.url}" class="category-card-link">
              <div class="category-card-image">
                <img src="${r.image}" alt="${r.title}">
              </div>
              <div class="category-card-body">
                <h3 class="category-card-title">${r.title}</h3>
              </div>
            </a>`;
          grid.appendChild(el);
        });

        count.textContent = \`Viser \${list.length} opskrifter\`;
      }

      function applyFilter() {
        const filtered =
          activeFilter === "Alle"
            ? ALL_RECIPES
            : ALL_RECIPES.filter(r => r.categories.includes(activeFilter));

        render(filtered);
      }

      filterButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          filterButtons.forEach(b => b.classList.remove("is-active"));
          btn.classList.add("is-active");
          activeFilter = btn.dataset.filter;
          applyFilter();
        });
      });

      // F√∏rste render
      render(ALL_RECIPES);
    });
  </script>

</body>
</html>
