<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Opskrifter i airfryer ‚Äì alle opskrifter samlet √©t sted</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
        content="F√• overblikket over alle opskrifter i airfryer ‚Äì kylling, fisk, kartofler, gr√∏ntsager, tilbeh√∏r, snacks, julemad og klassiske favoritter. S√∏g, filtr√©r og find den rette opskrift p√• f√• sekunder.">

  <link rel="stylesheet" href="../assets/styles.css" />
</head>

<body>

  <div data-include="icons"></div>
  <div data-include="header"></div>

  <main>
    <article class="page-recipes">

      <!-- HERO -->
      <section class="hero hero-inner">
        <div class="hero-inner-content">
          <p class="hero-kicker">alle opskrifter</p>
          <h1 class="hero-title">Opskrifter i airfryer</h1>
          <p class="hero-lead">
            Her finder du alle opskrifter samlet √©t sted ‚Äì spr√∏de kartofler, saftig kylling, nem hverdagsmad,
            juleklassikere, gr√∏ntsager, snacks og tilbeh√∏r. Siden er lavet som din centrale opskrifts-hub:
            du kan s√∏ge frit, filtrere efter kategori og hurtigt klikke dig videre til den opskrift, der passer perfekt
            til din airfryer og din hverdag.
          </p>
        </div>
      </section>

      <!-- FILTER-BAR -->
      <section class="filter-bar">
        <div class="filter-bar-inner">
          <span class="filter-label">Filtr√©r efter kategori:</span>
          <div class="filter-buttons">
            <button class="filter-btn is-active" data-filter="Alle">Alle</button>
            <button class="filter-btn" data-filter="sproede-kartofler">Spr√∏de kartofler</button>
            <button class="filter-btn" data-filter="kyllingefavoritter">Kylling</button>
            <button class="filter-btn" data-filter="nem-aftensmad">Aftensmad</button>
            <button class="filter-btn" data-filter="snacks-tilbehor">Snacks & tilbeh√∏r</button>
            <button class="filter-btn" data-filter="morgenmad">Morgenmad</button>
            <button class="filter-btn" data-filter="jul">Jul</button>
            <button class="filter-btn" data-filter="sund-airfryer">Sundt</button>
          </div>
        </div>
      </section>

      <!-- OPSKRIFT-GRID -->
      <section class="section-category" style="margin-top:2.5rem; margin-bottom:3rem;">
        <div class="category-header">
          <div>
            <h2 class="section-title">Alle opskrifter</h2>
            <p class="section-desc" id="recipes-count">
              Indl√¶ser opskrifter‚Ä¶
            </p>
          </div>
        </div>

        <div class="category-grid" id="recipes-grid">
          <!-- Dynamisk indhold -->
        </div>

        <div id="recipes-empty-state" style="display:none; max-width:760px; margin:2rem auto 0; text-align:center; color:#666;">
          <p style="margin-bottom:0.75rem;">
            Der er ingen opskrifter, der matcher dine filtre.
          </p>
        </div>
      </section>

    </article>
  </main>

  <div data-include="footer"></div>
  <div data-include="analytics"></div>


  <!-- üëá 1. Indl√¶s recipes.js som JSON og konverter -->
  <script>
    let ALL_RECIPES = [];

    async function loadExternalRecipes() {
      try {
        const response = await fetch("../assets/recipes.js");
        const text = await response.text();
        const json = JSON.parse(text.trim());

        ALL_RECIPES = json.recipes.map(r => ({
          slug: r.slug,
          title: r.title,
          url: `./${r.slug}.html`,
          image: `../assets/images/recipes/${r.slug}-768x768.jpg`,
          categories: r.categories || []
        }));
      } catch (err) {
        console.error("Fejl ved indl√¶sning af recipes.js:", err);
      }
    }
  </script>


  <!-- üëá 2. N√•r JSON er hentet, start hele opskriftssystemet -->
  <script>
    document.addEventListener("DOMContentLoaded", async function () {
      await loadExternalRecipes(); // hent dine opskrifter

      const grid = document.getElementById("recipes-grid");
      const countEl = document.getElementById("recipes-count");
      const emptyState = document.getElementById("recipes-empty-state");
      const filterButtons = [...document.querySelectorAll(".filter-btn")];

      let activeFilter = "Alle";

      function renderRecipes(list) {
        grid.innerHTML = "";

        if (!list.length) {
          emptyState.style.display = "block";
          countEl.textContent = "Ingen opskrifter matcher filtrene.";
          return;
        }

        emptyState.style.display = "none";

        list.forEach(recipe => {
          const card = document.createElement("article");
          card.className = "category-card";
          card.innerHTML = `
            <a href="${recipe.url}" class="category-card-link">
              <div class="category-card-image">
                <img src="${recipe.image}" alt="${recipe.title}">
              </div>
              <div class="category-card-body">
                <h3 class="category-card-title">${recipe.title}</h3>
              </div>
            </a>
          `;
          grid.appendChild(card);
        });
      }

      function applyFilters() {
        const filtered =
          activeFilter === "Alle"
            ? ALL_RECIPES
            : ALL_RECIPES.filter(r => r.categories.includes(activeFilter));

        renderRecipes(filtered);
        countEl.textContent = `Viser ${filtered.length} opskrifter`;
      }

      filterButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          filterButtons.forEach(b => b.classList.remove("is-active"));
          btn.classList.add("is-active");
          activeFilter = btn.dataset.filter;
          applyFilters();
        });
      });

      applyFilters(); // f√∏rste load
    });
  </script>

</body>
</html>
