<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Opskrifter i airfryer – Opskrift-Airfryer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Find lækre airfryeropskrifter – nemt, sprødt og perfekt hver gang.">
  <link rel="stylesheet" href="assets/styles.css" />

  <!-- ⭐ NYT: Animation + sticky styles -->
  <style>
    /* Fade-in / fade-out animation */
    .fade-in {
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 0.35s forwards ease-out;
    }
    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Sticky søgefelt */
    .hero-large-search.sticky {
      position: sticky;
      top: 12px;
      z-index: 50;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(6px);
      border-radius: 12px;
      padding: 0.5rem 1rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    }
  </style>
</head>

<body>

<div data-include="icons"></div>
<div data-include="header"></div>

<!-- HERO -->
<section class="hero-large"
         style="background-image: url('assets/images/hero/hero-julebord-airfryer-1920x1080.jpg');">
  <div class="hero-large-overlay"></div>

  <div class="hero-large-content">
    <h1 class="hero-large-title">Opskrifter & madinspiration</h1>
    <p class="hero-large-subtitle">
      300 lækre airfryeropskrifter udviklet og testet i vores eget airfryerkøkken.
    </p>

    <!-- ⭐ ÆNDRET: search.html fjernet + id tilføjet -->
    <form class="hero-large-search" id="frontpage-search" onsubmit="return false;">
      <input type="search" id="frontpage-search-input" placeholder="Søg efter opskrift…" />
      <button type="submit">
        <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round">
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="15" y1="15" x2="21" y2="21"></line>
        </svg>
      </button>
    </form>

    <button class="hero-large-filter-btn">Filtre +</button>
  </div>
</section>

<!-- ⭐ NYT: LIVE SØGERESULTATER UNDER HERO -->
<section id="frontpage-search-results"
         style="display:none; margin-top:3rem;"
         class="fade-in">
  <div class="category-header">
    <h2 class="section-title">Søgeresultater</h2>
    <p class="section-desc" id="frontpage-results-count"></p>
  </div>

  <div class="category-grid" id="frontpage-results-grid"></div>

  <p id="frontpage-no-results"
     style="display:none; text-align:center; color:#666; margin-top:1.5rem;">
    Ingen opskrifter matcher din søgning.
  </p>
</section>


<!-- MAIN CONTENT (ALT HERUNDER ER UÆNDRET) -->
<main>

  <section class="section-popular">
  <h2 class="section-title">Populære temaer</h2>

  <div class="popular-grid">

    <a class="theme-card" href="kategori.html?k=sproede-kartofler">
      <img src="assets/images/tema/sproede-kartofler-768x768.jpg" class="theme-img-round" alt="Sprøde kartofler">
      <h3>Sprøde kartofler</h3>
      <p class="theme-meta" data-category="sproede-kartofler">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=kyllingefavoritter">
      <img src="assets/images/tema/kyllingefavoritter-768x768.jpg" class="theme-img-round" alt="Kyllingefavoritter">
      <h3>Kyllingefavoritter</h3>
      <p class="theme-meta" data-category="kyllingefavoritter">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=nem-aftensmad">
      <img src="assets/images/tema/nem-aftensmad-768x768.jpg" class="theme-img-round" alt="Nem aftensmad">
      <h3>Nem aftensmad</h3>
      <p class="theme-meta" data-category="nem-aftensmad">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=snacks-tilbehor">
      <img src="assets/images/tema/snacks-tilbehor-768x768.jpg" class="theme-img-round" alt="Snacks & tilbehør">
      <h3>Snacks & tilbehør</h3>
      <p class="theme-meta" data-category="snacks-tilbehor">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=sund-airfryer">
      <img src="assets/images/tema/sund-airfryer-768x768.jpg" class="theme-img-round" alt="Sundere airfryer-retter">
      <h3>Sundere airfryer-retter</h3>
      <p class="theme-meta" data-category="sund-airfryer">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=morgenmad">
      <img src="assets/images/tema/morgenmad-airfryer-768x768.jpg" class="theme-img-round" alt="Morgenmad i airfryer">
      <h3>Morgenmad i airfryer</h3>
      <p class="theme-meta" data-category="morgenmad">0 opskrifter</p>
    </a>

    <a class="theme-card" href="kategori.html?k=bagvaerk">
      <img src="assets/images/tema/bagvaerk-soede-sager-768x768.jpg" class="theme-img-round" alt="Bagværk & søde sager">
      <h3>Bagværk & søde sager</h3>
      <p class="theme-meta" data-category="bagvaerk">0 opskrifter</p>
    </a>

  </div>
</section>

<!-- ALT NEDENFOR ER UÆNDRET -->
<section class="section-category jule-header">
  <div class="category-header">
    <h2 class="section-title">Julefrokost</h2>

    <div class="category-links">
      <a href="#">Jule klassikere</a><span>|</span>
      <a href="#">Julemad</a><span>|</span>
      <a href="#">Julesalat</a><span>|</span>
      <a href="#">Julekager</a><span>|</span>
      <a href="#">Juledesserter</a>
    </div>
  </div>
</section>

<!-- SLIDER osv... (INTET ÆNDRET) -->

<!-- FOOTER & INCLUDE -->
<div data-include="footer"></div>
<div data-include="analytics"></div>

<script src="assets/include.js" defer></script>
<script src="assets/header.js" defer></script>

<!-- SLIDER js (uændret) -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const slider = document.getElementById("recipe-slider");
  const btnPrev = document.querySelector(".slider-btn.prev");
  const btnNext = document.querySelector(".slider-btn.next");

  btnPrev.addEventListener("click", () => {
    slider.scrollBy({ left: -320, behavior: "smooth" });
  });

  btnNext.addEventListener("click", () => {
    slider.scrollBy({ left: 320, behavior: "smooth" });
  });
});
</script>

<!-- ⭐ FORSIDE-SØGNING (helt nyt script) -->
<script>
// --------------------------------------------
// HENT OPSKRIFTER
// --------------------------------------------
let FP_ALL_RECIPES = [];

async function fpLoadRecipes() {
  if (FP_ALL_RECIPES.length) return;
  const res = await fetch("/assets/recipes.json");
  const data = await res.json();
  FP_ALL_RECIPES = data.recipes || [];
}

// --------------------------------------------
// BILLEDMATCH (samme system som andre steder)
// --------------------------------------------
const FP_IMAGES = [
  "bacon-airfryer-768x768.jpg",
  "chicken-nuggets-airfryer-768x768.jpg",
  "fiskefilet-768x768.jpg",
  "flaeskesteg-i-airfryer-768x768.jpg",
  "flaeskestegssandwich-768x768.jpg",
  "frikadeller-768x768.jpg",
  "grillede-groentsager-airfryer-768x768.jpg",
  "hvidloegsbroed-airfryer-768x768.jpg",
  "kyllinge-laar-airfryer-768x768.jpg",
  "kyllingebryst-airfryer-768x768.jpg",
  "kyllingevinger-i-airfryer-768x768.jpg",
  "laks-i-airfryer-768x768.jpg",
  "pommes-frites-768x768.jpg",
  "vegetar-tarteletter-768x768.jpg"
];

function fpNormalize(str) {
  return str.toLowerCase()
    .replace(/-/g, " ")
    .replace(/æ/g, "ae").replace(/ø/g, "oe").replace(/å/g, "aa")
    .replace(/[^\w\s]/g, "");
}

function fpFindImage(slug) {
  const normSlug = fpNormalize(slug);
  const words = normSlug.split(" ");
  let best = null, score = -1;

  FP_IMAGES.forEach(file => {
    const fileNorm = fpNormalize(file);
    let s = 0;
    words.forEach(w => {
      if (fileNorm.includes(w)) s++;
    });
    if (s > score) { score = s; best = file; }
  });

  return best ? `assets/images/recipes/${best}` : "assets/images/recipes/placeholder.jpg";
}

// --------------------------------------------
// LIVE SØGNING
// --------------------------------------------
document.addEventListener("DOMContentLoaded", async () => {
  await fpLoadRecipes();

  const input = document.getElementById("frontpage-search-input");
  const searchBox = document.getElementById("frontpage-search");
  const section = document.getElementById("frontpage-search-results");
  const grid = document.getElementById("frontpage-results-grid");
  const count = document.getElementById("frontpage-results-count");
  const noResults = document.getElementById("frontpage-no-results");

  // Sticky search field on scroll
  window.addEventListener("scroll", () => {
    if (window.scrollY > 120) searchBox.classList.add("sticky");
    else searchBox.classList.remove("sticky");
  });

  input.addEventListener("input", () => {
    const q = input.value.trim().toLowerCase();

    if (q.length < 2) {
      section.style.display = "none";
      return;
    }

    const matches = FP_ALL_RECIPES.filter(r =>
      r.title.toLowerCase().includes(q) ||
      r.categories.join(" ").toLowerCase().includes(q)
    );

    grid.innerHTML = "";
    section.classList.remove("fade-in");
    void section.offsetWidth;
    section.classList.add("fade-in");

    if (!matches.length) {
      count.textContent = "";
      noResults.style.display = "block";
      section.style.display = "block";
      return;
    }

    noResults.style.display = "none";
    count.textContent = `Vi fandt ${matches.length} opskrifter`;

    matches.slice(0, 12).forEach(r => {
      const img = fpFindImage(r.slug);
      grid.insertAdjacentHTML("beforeend", `
        <article class="category-card fade-in">
          <a class="category-card-link" href="opskrifter/${r.slug}.html">
            <div class="category-card-image">
              <img src="${img}" alt="${r.title}">
            </div>
            <div class="category-card-body">
              <h3 class="category-card-title">${r.title}</h3>
            </div>
          </a>
        </article>
      `);
    });

    section.style.display = "block";
  });
});
</script>

</body>
</html>
